Возможные сценарии ошибок базы данных
✅ Реализованные сценарии обработки ошибок

1. Ошибки подключения (DatabaseConnectionError → HTTP 503)
   Недоступность сервера БД
   Код ошибки: 2003 - Can't connect to MySQL server

Причины:

Контейнер MariaDB не запущен

Неверный хост/порт в DATABASE_URL

Сетевые проблемы между контейнерами

Обработка: HTTP 503 + email уведомление + Svix retry

Ошибки аутентификации
Код ошибки: 1045 - Access denied

Причины:

Неверный логин/пароль в DATABASE_URL

Пользователь не существует

Отозваны права доступа

Обработка: HTTP 503 + email уведомление + немедленное уведомление админа

База данных не существует
Код ошибки: 1049 - Unknown database

Причины:

База данных не существует

Неверное имя базы в DATABASE_URL

Обработка: HTTP 503 + email уведомление

Таймауты подключения
Коды ошибок: 2002, 2005, 2006, 2013

Причины:

Медленный ответ сервера БД (>30 сек)

Перегрузка сервера БД

Сетевые задержки

Обработка: HTTP 503 + retry (без email для снижения спама)

2. Ошибки операций (DatabaseOperationError)
   Дублирующие записи (HTTP 200)
   Код ошибки: 1062 - Duplicate entry

Причины: Попытка вставить дублирующую запись

Обработка: HTTP 200 OK (ожидаемое поведение, не ошибка)

Ошибки синтаксиса SQL
Код ошибки: 1064 - SQL syntax error

Причины: Ошибка в SQL запросе (баг в коде)

Обработка: HTTP 503 + email уведомление

Нарушение ограничений
Код ошибки: 1452 - Foreign key constraint fails

Причины: Нарушение внешних ключей

Обработка: HTTP 503 + email уведомление

Переполнение диска
Код ошибки: 1021 - Disk full

Причины: Закончилось место на диске сервера

Обработка: HTTP 503 + критическое email уведомление

Блокировки и deadlock'и
Код ошибки: 1213 - Deadlock found when trying to get lock

Причины: Конфликт блокировок при
